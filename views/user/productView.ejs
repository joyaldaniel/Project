<%- include('../layouts/header.ejs') %>
    <%- include('../partials/user-navbar-loggedin.ejs') %>


        <div class="container mt-5 mb-5">
            <div class="row d-flex justify-content-center">
                <div class="col-md-10">
                    <div class="card">
                        <div class="row">
                            <div class="text-center p-4 zoom-image" data-image="/images/<%= result.image1%>"><img
                                    id="main-image" src="/images/<%= result.image1%> " width="250" /> </div>

                            <div class="thumbnail text-center" style="height: 5rem; margin-top: 1rem">
                                <img onclick="change_image(this)" src="/images/<%= result.image1 %> " % width="70"
                                    style="height: 5rem; margin-left: -9rem" />
                                <img onclick="change_image(this)" src="/images/<%= result.image2 %> " width="70"
                                    style="height: 5rem; margin-left: 1rem" />
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="product p-4">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div class="d-flex align-items-center"><a style="text-decoration: none;"
                                            href="/user_home"><i class="fa fa-long-arrow-left"></i> <span
                                                class="ml-1">Back</span> </a> </div> <a href="/cart"><i
                                            class="fa fa-shopping-cart text-muted"></i></a>
                                </div>
                                <div class="mt-4 mb-3"> <span class="text-uppercase text-muted brand"></span>
                                    <h5 class="text-uppercase">
                                        <%= result.productName %>
                                    </h5>

                                    <div class="price d-flex flex-row align-items-center"><span
                                            class="act-price font-i">
                                            <h1>â‚¹ <%= result.discountedPrice %>
                                            </h1>
                                        </span>


                                        <!-- not thhis  <div class="ml-2"> <small class="dis-price">$59</small> <span>40% OFF</span> </div> -->
                                    </div>
                                </div>
                                <p class="about">
                                <h5>
                                    <%= result.description %>
                                </h5>
                                </p>
                                <div class="sizes mt-5">
                                    <h6 class="text-uppercase">Size</h6> <label class="radio"> <input type="radio"
                                            name="size" value="S" checked> <span>S</span> </label> <label class="radio">
                                        <input type="radio" name="size" value="M"> <span>M</span> </label> <label
                                        class="radio"> <input type="radio" name="size" value="L"> <span>L</span>
                                    </label> <label class="radio"> <input type="radio" name="size" value="XL">
                                        <span>XL</span> </label> <label class="radio"> <input type="radio" name="size"
                                            value="XXL"> <span>XXL</span> </label>
                                </div>
                                <form action="/user_home/addToCart?id=<%= result._id%>&productview=true" method="post">
                                    <div class="cart mt-4 align-items-center"><button type="submit"
                                            class="btn btn-warning text-uppercase mr-2 px-4">Add to cart</button> <i
                                            class="fa fa-heart text-muted"></i> <i
                                            class="fa fa-share-alt text-muted"></i> </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>

        <script>
            function change_image(image) {

                var container = document.getElementById("main-image");

                container.src = image.src;
            }


            document.addEventListener("DOMContentLoaded", function (event) {


            });
        </script>
        <script>
            function change_image(image) {
                var container = document.getElementById("main-image");

                container.src = image.src;
            }

            document.addEventListener("DOMContentLoaded", function (event) { });
        </script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/elevatezoom/3.0.8/jquery.elevatezoom.min.js"></script>


        <script>
            // Zoom images

            // Add zoom-image class to the container of the image that you want to apply the zoom to.

            jQuery(document).ready(function ($) {

                $('.zoom-image img').click(function (event) {
                    var ix = $(this).offset().left;
                    var iy = $(this).offset().top;
                    console.log(ix + '-' + iy);

                    var mx = event.pageX;
                    var my = event.pageY;
                    console.log(mx + '-' + my);
                })

                $('.zoom-image img').hover(function () {

                    var img = $(this).attr('src');

                    $(this).after("<div class='hover-image' style='background-image: url(" + img + "); background-size: 300px;'></div>");

                    $(this).mousemove(function (event) {

                        // Mouse Position
                        var mx = event.pageX;
                        var my = event.pageY;

                        // Image Position
                        var ix = $(this).offset().left;
                        var iy = $(this).offset().top;

                        // Mouse Position Relavtive to Image
                        var x = mx - (ix);
                        var y = my - (iy);

                        // Image Height and Width
                        var w = $(this).width();
                        var h = $(this).height();

                        // Mouse Position Relative to Image, in %
                        var xp = (-x / w) * -100;
                        var yp = (-y / h) * -100;

                        $(this).parent().find('.hover-image').attr('style',

                            "background-image: url(" + img + "); background-size: 1000px; background-repeat: no-repeat; background-position: " + xp + "% " + yp + "%; top: " + y + "px; left: " + x + "px;");

                    });

                }, function () {

                    $(this).parent().find('.hover-image').remove();

                });

            });

        </script>
        <style>
            .zoom-image-container {

                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);

            }

            .zoom-image {

                position: relative;

            }

            .zoom-image img {

                cursor: zoom-in;


                /* box-shadow: 0 18px 5px -15px rgba( 0, 0, 0, .5 ); */

            }

            .hover-image {

                position: fixed;
                width: 300px;
                height: 300px;

                border-radius: 50%;

                transform: translate(-0%, -20%);

                pointer-events: none;

                box-shadow: 0 0 10px rgba(0, 0, 0, .5);

            }
        </style>

        <%- include('../layouts/footer.ejs') %>